name: C++ Projects Build

on:
  push:
    branches: [ main ]
    paths:
      - 'C[+][+]/**'
      - '.github/workflows/cpp-projects.yml'
  pull_request:
    branches: [ main ]
    paths:
      - 'C[+][+]/**'

jobs:
  build-raytracer:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Install dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y g++ make libconfig++-dev

    - name: Build raytracer
      working-directory: C++/raytracer
      run: make

    - name: Check executable exists
      working-directory: C++/raytracer
      run: test -f raytracer

    - name: Clean build
      working-directory: C++/raytracer
      run: make fclean

  build-summary:
    runs-on: ubuntu-latest
    needs: [build-raytracer]
    if: always()

    steps:
    - name: Summary
      run: |
        echo "Build process completed for all C++ projects"
